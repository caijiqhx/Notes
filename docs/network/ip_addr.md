# IP 地址相关问题

## IP 地址分类

IP 地址由网络号和主机号两部分组成。`ip_addr ::= {net-id, host-id}`

| 类型 | 网络号                      | 网络范围              | IP 地址范围                 |
| ---- | --------------------------- | --------------------- | --------------------------- |
| A 类 | 1 字节，第一位固定为 0      | 0 ~ 127               | 1.0.0.0 ~ 127.255.255.255   |
| B 类 | 2 字节，前两位固定为 10     | 128.0 ~ 191.255       | 128.0.0.0 ~ 191.255.255.255 |
| C 类 | 3 字节，前三位固定为 110    | 192.0.0 ~ 223.255.255 | 192.0.0.0 ~ 223.255.255.255 |
| D 类 | 多播地址，前四位固定为 1110 |                       |                             |
| E 类 | 前四位 1111，保留。         |                       |                             |

### 特殊地址

- `127.0.0.1`： 回环地址，指电脑本身，主要预留测试本机的 TCP/IP 协议是否正常。使用这个地址发送数据，数据包不会出现在网络传输过程中。
- `10.x.x.x, 172.16.x.x ~ 172.31.x.x, 192.168.x.x`：用作内网地址，不与外网相连。
- `255.255.255.255`：广播地址。
- `0.0.0.0`：在 IP 数据报中只能用作源 IP 地址，这发生在当设备启动时但又不知道自己的 IP 地址情况下。
- `localhost`：只是一个域名，默认是 `127.0.0.1`。
- `{0, host-id}`：本网络上某台主机，只能用作源地址。
- `{-1, -1}`：网络号和主机号全是 1，用于本网络的广播。只能用作目的地址。
- `{net-id, -1}`：广播到指定的网络上。只能用作目的地址。
- `{net-id, subnet-id, -1}`：广播到指定网络的指定子网，只用作目的地址。
- `{net-id, -1, -1}`：直接广播到指定网络的所有子网络上，只用于目的地址。
- `{127, }`：网络号为 127 的任意 IP 地址，都是内部主机回环地址，不能出现在主机外部的网络中。

### `127.0.0.1` 与 `0.0.0.0`

都是特殊地址，都是 A 类地址。

`127.0.0.1` 属于回环地址，用途：

- 回环测试，`通过 ping 127.0.0.1` 测试 TCP/IP 是否工作正常。
- DDos 攻击防御：网络收到 DDos 攻击之后，将域名 A 记录到 127.0.0.1，即让攻击者自己攻击自己。

`0.0.0.0`，IPv4 中表示一个无效的、未知的目标，用途：

- DHCP 分配前，表示本机。
- 用作默认路由，表示任意主机。
- 用作服务端，表示本机的任意 IPv4 地址，因此服务端绑定端口时绑定到 `0.0.0.0`。
